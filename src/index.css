
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap");
@tailwind base;
@tailwind components;
@tailwind utilities;

@import './styles/mobile-scrolling.css';
@import './styles/mobile-gifting.css';
@import './styles/ios-optimizations.css';

:root {
  /* Design system color tokens */
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --primary: 221.2 83.2% 53.3%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222.2 84% 4.9%;
  --muted: 210 40% 96%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96%;
  --accent-foreground: 222.2 84% 4.9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 221.2 83.2% 53.3%;
  --radius: 0.5rem;
  
  /* Unified Surface System */
  --surface-primary: 0 0% 100%;
  --surface-secondary: 210 40% 98%;
  --surface-elevated: 0 0% 100%;
  --surface-sunken: 210 40% 95%;
  --surface-subtle: 210 40% 97%;
  --border-subtle: 214.3 31.8% 95%;
  
  /* Typography Scale */
  --text-xs: 0.75rem;    /* 12px */
  --text-sm: 0.875rem;   /* 14px */
  --text-base: 1rem;     /* 16px */
  --text-lg: 1.125rem;   /* 18px */
  --text-xl: 1.25rem;    /* 20px */
  --text-2xl: 1.5rem;    /* 24px */
  --text-3xl: 1.875rem;  /* 30px */
  --text-4xl: 2.25rem;   /* 36px */
  
  /* Line Heights */
  --leading-none: 1;
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;
  
  /* Font Weights */
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;
  
  /* Spacing Scale (8px grid) */
  --space-0: 0;
  --space-1: 0.25rem;    /* 4px */
  --space-2: 0.5rem;     /* 8px */
  --space-3: 0.75rem;    /* 12px */
  --space-4: 1rem;       /* 16px */
  --space-5: 1.25rem;    /* 20px */
  --space-6: 1.5rem;     /* 24px */
  --space-8: 2rem;       /* 32px */
  --space-10: 2.5rem;    /* 40px */
  --space-12: 3rem;      /* 48px */
  --space-16: 4rem;      /* 64px */
  --space-20: 5rem;      /* 80px */
  --space-24: 6rem;      /* 96px */
  
  /* Enhanced order status colors */
  --status-pending: 35 91% 65%;
  --status-processing: 221.2 83.2% 53.3%;
  --status-shipped: 142 76% 36%;
  --status-delivered: 142 76% 36%;
  --status-cancelled: 0 84.2% 60.2%;
  --status-failed: 0 84.2% 60.2%;
  
  /* Progress stepper colors */
  --stepper-active: 221.2 83.2% 53.3%;
  --stepper-completed: 142 76% 36%;
  --stepper-inactive: 215.4 16.3% 46.9%;
  
  /* Enhanced gradients */
  --gradient-primary: linear-gradient(135deg, hsl(var(--primary)), hsl(221.2 83.2% 58.3%));
  --gradient-success: linear-gradient(135deg, hsl(142 76% 36%), hsl(142 76% 46%));
  --gradient-subtle: linear-gradient(180deg, hsl(var(--card)), hsl(var(--muted)));
  
  /* Enhanced shadows */
  --shadow-subtle: 0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.03);
  --shadow-card: 0 2px 8px -2px rgba(0, 0, 0, 0.1), 0 1px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-floating: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --primary: 217.2 91.2% 59.8%;
  --primary-foreground: 222.2 84% 4.9%;
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 224.3 76.3% 94.1%;
}

* {
  border-color: hsl(var(--border));
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-family: "Inter", sans-serif;
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  font-weight: var(--font-normal);
}

@layer components {
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-bottom {
    padding-bottom: max(20px, env(safe-area-inset-bottom));
  }

  .px-safe {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
  }

  /* iOS-style touch targets */
  .touch-target-44 {
    min-height: 44px;
    min-width: 44px;
  }

  /* Mobile-optimized touch targets */
  .touch-target-mobile {
    min-height: 40px;
    min-width: 40px;
  }

  /* Enhanced touch manipulation */
  .touch-manipulation {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  /* Mobile-first responsive text sizing */
  .text-mobile-responsive {
    font-size: clamp(0.75rem, 2vw, 1rem);
  }

  .text-mobile-heading {
    font-size: clamp(1rem, 4vw, 1.5rem);
  }

  /* iOS-style backdrop blur for bottom nav */
  .backdrop-blur-lg {
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }

  /* Content spacing for mobile bottom navigation */
  .mobile-content-spacing {
    padding-bottom: max(90px, calc(90px + env(safe-area-inset-bottom)));
  }

  .mobile-grid-optimized {
    touch-action: manipulation;
  }

  .intersection-target {
    contain: layout style paint;
  }

  .will-change-scroll {
    will-change: scroll-position;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }

  /* Enhanced order page components */
  .order-progress-stepper {
    position: relative;
  }

  .order-progress-stepper::before {
    content: '';
    position: absolute;
    top: 20px;
    left: 20px;
    right: 20px;
    height: 2px;
    background: hsl(var(--border));
    z-index: 1;
  }

  .order-progress-step {
    position: relative;
    z-index: 2;
    background: hsl(var(--background));
  }

  .floating-action-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: hsl(var(--background));
    box-shadow: var(--shadow-floating);
    border-top: 1px solid hsl(var(--border));
    z-index: 50;
  }

  .gradient-card {
    background: var(--gradient-subtle);
  }

  .status-badge-enhanced {
    background: var(--gradient-primary);
    color: hsl(var(--primary-foreground));
    border: none;
  }

  .tracking-progress {
    background: var(--gradient-success);
    border-radius: 9999px;
    height: 4px;
    transition: width 0.3s ease;
  }

  .order-timeline {
    position: relative;
  }

  .order-timeline::before {
    content: '';
    position: absolute;
    left: 20px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: hsl(var(--border));
  }

  .timeline-item {
    position: relative;
    padding-left: 60px;
  }

  .timeline-marker {
    position: absolute;
    left: 11px;
    top: 6px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: hsl(var(--background));
    border: 3px solid hsl(var(--stepper-inactive));
    z-index: 2;
  }

  .timeline-marker.completed {
    border-color: hsl(var(--stepper-completed));
    background: hsl(var(--stepper-completed));
  }

  .timeline-marker.active {
    border-color: hsl(var(--stepper-active));
    background: hsl(var(--stepper-active));
  }

  /* Pinterest-style masonry grid */
  .masonry-grid {
    columns: 1;
    column-gap: 1rem;
  }

  @media (min-width: 640px) {
    .masonry-grid {
      columns: 2;
    }
  }
  
  @media (min-width: 768px) {
    .masonry-grid {
      columns: 3;
    }
  }
  
  @media (min-width: 1024px) {
    .masonry-grid {
      columns: 4;
    }
  }
  
  @media (min-width: 1280px) {
    .masonry-grid {
      columns: 5;
    }
  }

  .masonry-item {
    break-inside: avoid;
    margin-bottom: 1rem;
    page-break-inside: avoid;
  }

  /* Pinterest-style hover effects */
  .pinterest-hover {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
  }
  
  .pinterest-hover:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-floating);
  }

  /* Mixed bleed image styles */
  .bleed-image {
    aspect-ratio: auto;
    object-fit: cover;
    border-radius: calc(var(--radius) - 2px);
  }

  .bleed-tall {
    aspect-ratio: 3/4;
  }

  .bleed-wide {
    aspect-ratio: 4/3;
  }

  .bleed-square {
    aspect-ratio: 1/1;
  }

  /* Contextual section styling */
  .contextual-section {
    background: var(--gradient-subtle);
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
  }

  /* Smart category tags */
  .smart-tag {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.1), hsl(var(--accent) / 0.1));
    border: 1px solid hsl(var(--primary) / 0.2);
    transition: all 0.2s ease;
  }

  .smart-tag:hover {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.2), hsl(var(--accent) / 0.2));
    border-color: hsl(var(--primary) / 0.3);
  }

  /* Unified Typography Components */
  .text-heading-1 {
    font-size: var(--text-4xl);
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    color: hsl(var(--foreground));
  }
  
  .text-heading-2 {
    font-size: var(--text-3xl);
    font-weight: var(--font-semibold);
    line-height: var(--leading-tight);
    color: hsl(var(--foreground));
  }
  
  .text-heading-3 {
    font-size: var(--text-2xl);
    font-weight: var(--font-semibold);
    line-height: var(--leading-snug);
    color: hsl(var(--foreground));
  }
  
  .text-heading-4 {
    font-size: var(--text-xl);
    font-weight: var(--font-medium);
    line-height: var(--leading-snug);
    color: hsl(var(--foreground));
  }
  
  .text-body-lg {
    font-size: var(--text-lg);
    font-weight: var(--font-normal);
    line-height: var(--leading-relaxed);
    color: hsl(var(--foreground));
  }
  
  .text-body {
    font-size: var(--text-base);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    color: hsl(var(--foreground));
  }
  
  .text-body-sm {
    font-size: var(--text-sm);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    color: hsl(var(--muted-foreground));
  }
  
  .text-caption {
    font-size: var(--text-xs);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    color: hsl(var(--muted-foreground));
  }

  /* Unified Surface Components */
  .surface-primary {
    background-color: hsl(var(--surface-primary));
    border: 1px solid hsl(var(--border));
  }
  
  .surface-secondary {
    background-color: hsl(var(--surface-secondary));
    border: 1px solid hsl(var(--border));
  }
  
  .surface-elevated {
    background-color: hsl(var(--surface-elevated));
    box-shadow: var(--shadow-card);
    border: 1px solid hsl(var(--border));
  }
  
  .surface-sunken {
    background-color: hsl(var(--surface-sunken));
    border: 1px solid hsl(var(--border));
  }
  
  .surface-subtle {
    background-color: hsl(var(--surface-subtle));
  }
  
  .border-subtle {
    border-color: hsl(var(--border-subtle));
  }

  /* Wishlist CTA Section Styling */
  .wishlist-cta-section {
    background: linear-gradient(135deg, 
      hsl(var(--primary) / 0.05), 
      hsl(221.2 83.2% 58.3% / 0.08)
    );
    border: 1px solid hsl(var(--primary) / 0.15);
    border-radius: calc(var(--radius) + 4px);
    padding: 1.5rem;
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-card);
    transition: all 0.3s ease;
  }

  .wishlist-cta-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient-primary);
    border-radius: calc(var(--radius) + 4px) calc(var(--radius) + 4px) 0 0;
  }

  .wishlist-cta-section:hover {
    border-color: hsl(var(--primary) / 0.25);
    box-shadow: var(--shadow-floating);
    transform: translateY(-1px);
  }

  /* Mobile iOS enhancements for wishlist section */
  @media (max-width: 768px) {
    .wishlist-cta-section {
      margin: -0.5rem;
      margin-bottom: 1rem;
      border-radius: var(--radius);
      padding: 1rem;
      background: linear-gradient(135deg, 
        hsl(var(--primary) / 0.08), 
        hsl(221.2 83.2% 58.3% / 0.12)
      );
      /* iOS-style touch feedback */
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      animation: subtle-pulse 3s ease-in-out infinite;
    }

    .wishlist-cta-section:active {
      transform: scale(0.995);
      transition: transform 0.1s ease;
    }
  }

  /* Subtle pulse animation for mobile attention */
  @keyframes subtle-pulse {
    0%, 100% {
      box-shadow: var(--shadow-card);
    }
    50% {
      box-shadow: 0 4px 12px -2px hsl(var(--primary) / 0.15), 
                  0 2px 6px -1px hsl(var(--primary) / 0.08);
    }
  }

  /* Safe area support for iOS */
  .wishlist-cta-section {
    margin-left: max(1rem, env(safe-area-inset-left));
    margin-right: max(1rem, env(safe-area-inset-right));
  }

  @media (min-width: 769px) {
    .wishlist-cta-section {
      margin-left: 0;
      margin-right: 0;
    }
  }

  /* Unified Card System */
  .card-unified {
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
    box-shadow: var(--shadow-card);
    transition: all 0.2s ease;
  }
  
  .card-unified:hover {
    box-shadow: var(--shadow-floating);
    transform: translateY(-1px);
  }
  
  .card-elevated {
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
    box-shadow: var(--shadow-floating);
  }

  /* Unified Spacing Classes */
  .space-y-unified > * + * {
    margin-top: var(--space-6);
  }
  
  .space-y-tight > * + * {
    margin-top: var(--space-4);
  }
  
  .space-y-standard > * + * {
    margin-top: var(--space-6);
  }
  
  .space-y-loose > * + * {
    margin-top: var(--space-8);
  }
  
  .space-y-minimal > * + * {
    margin-top: var(--space-2);
  }
  
  .gap-unified {
    gap: var(--space-6);
  }
  
  .gap-tight {
    gap: var(--space-4);
  }
  
  .gap-commerce {
    gap: var(--space-5);
  }
  
  .gap-loose {
    gap: var(--space-8);
  }

  /* Margin spacing utilities */
  .mb-space-minimal {
    margin-bottom: var(--space-2);
  }
  
  .mb-space-tight {
    margin-bottom: var(--space-4);
  }
  
  .mb-space-standard {
    margin-bottom: var(--space-6);
  }
  
  .mb-space-loose {
    margin-bottom: var(--space-8);
  }
  
  .mb-space-xl {
    margin-bottom: var(--space-12);
  }
  
  .mt-space-minimal {
    margin-top: var(--space-2);
  }
  
  .mt-space-tight {
    margin-top: var(--space-4);
  }
  
  .mt-space-standard {
    margin-top: var(--space-6);
  }
  
  .mt-space-loose {
    margin-top: var(--space-8);
  }
  
  .mt-space-xl {
    margin-top: var(--space-12);
  }

  /* Padding spacing utilities */
  .py-space-tight {
    padding-top: var(--space-4);
    padding-bottom: var(--space-4);
  }
  
  .py-space-standard {
    padding-top: var(--space-6);
    padding-bottom: var(--space-6);
  }
  
  .py-space-loose {
    padding-top: var(--space-8);
    padding-bottom: var(--space-8);
  }
  
  .py-space-xl {
    padding-top: var(--space-12);
    padding-bottom: var(--space-12);
  }

  /* Touch-Optimized Components */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
  }
  
  .touch-target-44 {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
  }
  
  .touch-target-48 {
    min-height: 48px;
    min-width: 48px;
    touch-action: manipulation;
  }
  
  .touch-padding {
    padding: var(--space-3) var(--space-4);
  }
  
  .touch-padding-sm {
    padding: var(--space-2) var(--space-3);
  }
  
  .touch-padding-lg {
    padding: var(--space-4) var(--space-6);
  }

  /* Container System */
  .container-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--space-6);
  }
  
  .container-header {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 var(--space-4);
  }
  
  .container-narrow {
    max-width: 768px;
    margin: 0 auto;
    padding: 0 var(--space-6);
  }
  
  .container-full {
    width: 100%;
    padding: 0 var(--space-4);
  }
  
  @media (max-width: 768px) {
    .container-content,
    .container-narrow {
      padding: 0 var(--space-4);
    }
    
    .container-header {
      padding: 0 var(--space-3);
    }
  }
}
